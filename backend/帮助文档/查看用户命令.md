# 查看注册用户命令

## 方法一：通过 MySQL 命令行（推荐）

### 查看所有用户（不显示密码）

```bash
docker exec mysql-h5 mysql -uroot -proot123456 -e "USE h5_db; SELECT id, username, email, createdAt FROM users ORDER BY createdAt DESC;"
```

### 查看所有用户（包括密码哈希）

```bash
docker exec mysql-h5 mysql -uroot -proot123456 -e "USE h5_db; SELECT * FROM users;"
```

### 进入 MySQL 交互式命令行

```bash
docker exec -it mysql-h5 mysql -uroot -proot123456 h5_db
```

然后在 MySQL 中执行：

```sql
-- 查看所有用户
SELECT id, username, email, createdAt FROM users ORDER BY createdAt DESC;

-- 查看用户总数
SELECT COUNT(*) as total_users FROM users;

-- 查看特定用户
SELECT * FROM users WHERE username = 'yanwei';

-- 查看最近注册的用户
SELECT * FROM users ORDER BY createdAt DESC LIMIT 5;
```

## 方法二：通过 API 接口

### 使用 curl 查看所有用户

```bash
curl http://localhost:3000/api/user/list
```

### 格式化输出（需要 jq）

```bash
curl -s http://localhost:3000/api/user/list | jq .
```

如果没有 jq，可以使用 Python：

```bash
curl -s http://localhost:3000/api/user/list | python3 -m json.tool
```

## 方法三：使用项目脚本

### 使用 Docker 管理脚本

```bash
cd docker
./docker-start.sh mysql
```

然后在 MySQL 中执行查询。

## 方法四：创建便捷脚本

创建一个脚本文件 `查看用户.sh`：

```bash
#!/bin/bash
echo "=== 所有注册用户 ==="
docker exec mysql-h5 mysql -uroot -proot123456 -e "USE h5_db; SELECT id, username, email, DATE_FORMAT(createdAt, '%Y-%m-%d %H:%i:%s') as '注册时间' FROM users ORDER BY createdAt DESC;" 2>/dev/null | grep -v "Warning"
```

使用：

```bash
chmod +x 查看用户.sh
./查看用户.sh
```

## 常用查询示例

### 1. 查看用户总数

```bash
docker exec mysql-h5 mysql -uroot -proot123456 -e "USE h5_db; SELECT COUNT(*) as '用户总数' FROM users;"
```

### 2. 查看特定用户

```bash
docker exec mysql-h5 mysql -uroot -proot123456 -e "USE h5_db; SELECT * FROM users WHERE username = 'yanwei';"
```

### 3. 查看最近注册的 5 个用户

```bash
docker exec mysql-h5 mysql -uroot -proot123456 -e "USE h5_db; SELECT id, username, email, createdAt FROM users ORDER BY createdAt DESC LIMIT 5;"
```

### 4. 查看今天注册的用户

```bash
docker exec mysql-h5 mysql -uroot -proot123456 -e "USE h5_db; SELECT * FROM users WHERE DATE(createdAt) = CURDATE();"
```

### 5. 查看用户表结构

```bash
docker exec mysql-h5 mysql -uroot -proot123456 -e "USE h5_db; DESCRIBE users;"
```

## 注意事项

1. **密码安全**：密码以 bcrypt 哈希形式存储，无法直接查看明文
2. **数据库连接**：确保 Docker 容器 `mysql-h5` 正在运行
3. **权限**：使用 root 用户，密码为 `root123456`（开发环境）

## 快速命令总结

```bash
# 最简单的方式
docker exec mysql-h5 mysql -uroot -proot123456 -e "USE h5_db; SELECT id, username, email, createdAt FROM users;"

# 通过 API
curl http://localhost:3000/api/user/list
```

