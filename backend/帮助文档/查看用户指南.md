# 查看用户指南

## 当前状态

**数据库中没有默认用户**，需要先注册用户才能登录。

## 创建用户的方法

### 方法一：通过前端注册页面（推荐）

1. 访问前端注册页面：http://localhost:5173/register
2. 填写注册信息：
   - Name（姓名）
   - Email Address（邮箱）
   - Password（密码，至少6个字符）
3. 点击 "Sign Up" 注册
4. 注册成功后，使用注册的用户名和密码登录

### 方法二：通过 API 注册

使用 Postman 或 curl 调用注册接口：

```bash
curl -X POST http://localhost:3000/api/user \
  -H "Content-Type: application/json" \
  -d '{
    "username": "testuser",
    "email": "test@example.com",
    "password": "123456"
  }'
```

### 方法三：通过数据库直接创建（不推荐，仅用于测试）

```bash
# 进入 MySQL 容器
docker exec -it mysql-h5 mysql -uroot -proot123456 h5_db

# 在 MySQL 中执行（需要先安装 bcryptjs 生成密码哈希）
# 或者使用 Node.js 脚本生成密码哈希
```

## 查看所有用户的方法

### 方法一：通过 API 接口（推荐）

后端已提供获取所有用户的接口：

```bash
# 获取所有用户列表
curl http://localhost:3000/api/user/list
```

或者在浏览器访问：
```
http://localhost:3000/api/user/list
```

### 方法二：通过 Swagger API 文档

1. 访问 Swagger 文档：http://localhost:3000/api-docs
2. 找到 "用户" 标签
3. 点击 `GET /api/user/list` 接口
4. 点击 "Try it out" → "Execute"
5. 查看返回的用户列表

### 方法三：通过数据库查询

```bash
# 查看所有用户（不显示密码）
docker exec mysql-h5 mysql -uroot -proot123456 -e "USE h5_db; SELECT id, username, email, createdAt FROM users;"
```

或者进入 MySQL 命令行：

```bash
docker exec -it mysql-h5 mysql -uroot -proot123456 h5_db

# 在 MySQL 中执行
SELECT id, username, email, createdAt FROM users;
```

### 方法四：查看完整用户信息（包括密码哈希）

```bash
docker exec mysql-h5 mysql -uroot -proot123456 -e "USE h5_db; SELECT * FROM users;"
```

## 快速创建测试用户

### 使用 curl 创建测试用户

```bash
# 创建测试用户
curl -X POST http://localhost:3000/api/user \
  -H "Content-Type: application/json" \
  -d '{
    "username": "admin",
    "email": "admin@example.com",
    "password": "admin123"
  }'
```

创建后可以使用以下账号登录：
- **用户名**: admin
- **密码**: admin123

## 测试登录

创建用户后，可以使用以下方式测试登录：

### 通过前端

1. 访问：http://localhost:5173/login
2. 输入用户名和密码
3. 点击 "Sign In"

### 通过 API

```bash
curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "username": "admin",
    "password": "admin123"
  }'
```

## 用户数据结构

用户表结构：

```sql
CREATE TABLE users (
  id INT PRIMARY KEY AUTO_INCREMENT,
  username VARCHAR(50) UNIQUE NOT NULL,
  email VARCHAR(100) UNIQUE NOT NULL,
  password VARCHAR(255) NOT NULL,  -- bcrypt 加密后的密码
  avatar VARCHAR(200),
  createdAt DATETIME,
  updatedAt DATETIME
);
```

## 注意事项

1. **密码加密**：所有密码都使用 bcrypt 加密存储，无法直接查看明文密码
2. **默认用户**：系统没有预设默认用户，必须通过注册创建
3. **用户名唯一**：用户名和邮箱都必须唯一
4. **密码要求**：密码至少6个字符

## 常用命令总结

```bash
# 查看所有用户（API）
curl http://localhost:3000/api/user/list

# 查看所有用户（数据库）
docker exec mysql-h5 mysql -uroot -proot123456 -e "USE h5_db; SELECT id, username, email, createdAt FROM users;"

# 创建测试用户
curl -X POST http://localhost:3000/api/user \
  -H "Content-Type: application/json" \
  -d '{"username":"test","email":"test@test.com","password":"123456"}'

# 测试登录
curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"test","password":"123456"}'
```

